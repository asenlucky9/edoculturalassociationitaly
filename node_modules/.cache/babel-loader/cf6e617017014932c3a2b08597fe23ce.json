{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'./AuthProvider';// Ensure the path to AuthProvider is correct\nconst Events=()=>{const{user,logout,events,addEvent}=useAuth();const[newEvent,setNewEvent]=useState({title:'',address:'',date:'',image:null});const[error,setError]=useState(null);const[previewImage,setPreviewImage]=useState(null);// Effect to revoke the object URL when the component unmounts or when the image changes\nuseEffect(()=>{return()=>{if(previewImage){URL.revokeObjectURL(previewImage);// Clean up object URL\n}};},[previewImage]);const handleInputChange=e=>{const{name,value}=e.target;setNewEvent(prev=>({...prev,[name]:value}));setError(null);// Clear error if input changes\n};const handleImageUpload=e=>{const file=e.target.files[0];if(file){setNewEvent(prev=>({...prev,image:file}));setPreviewImage(URL.createObjectURL(file));// Show preview of uploaded image\n}};const handleSubmit=e=>{e.preventDefault();if(!newEvent.title||!newEvent.address||!newEvent.date||!newEvent.image){setError('All fields are required.');return;}// Add the event to context\naddEvent(newEvent);setNewEvent({title:'',address:'',date:'',image:null});setPreviewImage(null);// Clear preview\nsetError(null);};const handleLogout=()=>{logout();};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Upcoming Events\"),user&&user.role==='admin'&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"button\",{onClick:handleLogout,style:{marginBottom:'10px'}},\"Logout\"),/*#__PURE__*/React.createElement(\"h3\",null,\"Add New Event\"),error&&/*#__PURE__*/React.createElement(\"p\",{style:{color:'red'}},error),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"title\",placeholder:\"Event Title\",value:newEvent.title,onChange:handleInputChange,required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"address\",placeholder:\"Event Address\",value:newEvent.address,onChange:handleInputChange,required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"date\",name:\"date\",value:newEvent.date,onChange:handleInputChange,required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",name:\"image\",accept:\"image/*\",onChange:handleImageUpload,required:true}),previewImage&&/*#__PURE__*/React.createElement(\"img\",{src:previewImage,alt:\"Event preview\",style:{width:'100px',height:'auto'}}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Add Event\"))),/*#__PURE__*/React.createElement(\"h3\",null,\"Event List\"),/*#__PURE__*/React.createElement(\"ul\",null,events.length>0?events.map((event,index)=>/*#__PURE__*/React.createElement(\"li\",{key:index},/*#__PURE__*/React.createElement(\"h4\",null,event.title),/*#__PURE__*/React.createElement(\"p\",null,event.address),/*#__PURE__*/React.createElement(\"p\",null,new Date(event.date).toLocaleDateString()),event.image&&/*#__PURE__*/React.createElement(\"img\",{src:URL.createObjectURL(event.image),alt:event.title,style:{width:'100px',height:'auto'}}))):/*#__PURE__*/React.createElement(\"p\",null,\"No upcoming events found.\")));};export default Events;","map":{"version":3,"names":["React","useState","useEffect","useAuth","Events","user","logout","events","addEvent","newEvent","setNewEvent","title","address","date","image","error","setError","previewImage","setPreviewImage","URL","revokeObjectURL","handleInputChange","e","name","value","target","prev","handleImageUpload","file","files","createObjectURL","handleSubmit","preventDefault","handleLogout","createElement","role","Fragment","onClick","style","marginBottom","color","onSubmit","type","placeholder","onChange","required","accept","src","alt","width","height","length","map","event","index","key","Date","toLocaleDateString"],"sources":["C:/Users/king/OneDrive/Desktop/edoculturalassociationitaly/src/events.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'; \r\nimport { useAuth } from './AuthProvider'; // Ensure the path to AuthProvider is correct\r\n\r\nconst Events = () => {\r\n    const { user, logout, events, addEvent } = useAuth();\r\n    const [newEvent, setNewEvent] = useState({ title: '', address: '', date: '', image: null });\r\n    const [error, setError] = useState(null);\r\n    const [previewImage, setPreviewImage] = useState(null);\r\n\r\n    // Effect to revoke the object URL when the component unmounts or when the image changes\r\n    useEffect(() => {\r\n        return () => {\r\n            if (previewImage) {\r\n                URL.revokeObjectURL(previewImage); // Clean up object URL\r\n            }\r\n        };\r\n    }, [previewImage]);\r\n\r\n    const handleInputChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setNewEvent((prev) => ({ ...prev, [name]: value }));\r\n        setError(null); // Clear error if input changes\r\n    };\r\n\r\n    const handleImageUpload = (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n            setNewEvent((prev) => ({ ...prev, image: file }));\r\n            setPreviewImage(URL.createObjectURL(file)); // Show preview of uploaded image\r\n        }\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        if (!newEvent.title || !newEvent.address || !newEvent.date || !newEvent.image) {\r\n            setError('All fields are required.');\r\n            return;\r\n        }\r\n\r\n        // Add the event to context\r\n        addEvent(newEvent);\r\n        setNewEvent({ title: '', address: '', date: '', image: null });\r\n        setPreviewImage(null); // Clear preview\r\n        setError(null);\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        logout();\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h2>Upcoming Events</h2>\r\n            {user && user.role === 'admin' && (\r\n                <>\r\n                    <button onClick={handleLogout} style={{ marginBottom: '10px' }}>\r\n                        Logout\r\n                    </button>\r\n                    <h3>Add New Event</h3>\r\n                    {error && <p style={{ color: 'red' }}>{error}</p>}\r\n                    <form onSubmit={handleSubmit}>\r\n                        <input \r\n                            type=\"text\" \r\n                            name=\"title\" \r\n                            placeholder=\"Event Title\" \r\n                            value={newEvent.title} \r\n                            onChange={handleInputChange} \r\n                            required \r\n                        />\r\n                        <input \r\n                            type=\"text\" \r\n                            name=\"address\" \r\n                            placeholder=\"Event Address\" \r\n                            value={newEvent.address} \r\n                            onChange={handleInputChange} \r\n                            required \r\n                        />\r\n                        <input \r\n                            type=\"date\" \r\n                            name=\"date\" \r\n                            value={newEvent.date} \r\n                            onChange={handleInputChange} \r\n                            required \r\n                        />\r\n                        <input \r\n                            type=\"file\" \r\n                            name=\"image\" \r\n                            accept=\"image/*\" \r\n                            onChange={handleImageUpload} \r\n                            required \r\n                        />\r\n                        {previewImage && (\r\n                            <img src={previewImage} alt=\"Event preview\" style={{ width: '100px', height: 'auto' }} />\r\n                        )}\r\n                        <button type=\"submit\">Add Event</button>\r\n                    </form>\r\n                </>\r\n            )}\r\n            <h3>Event List</h3>\r\n            <ul>\r\n                {events.length > 0 ? (\r\n                    events.map((event, index) => (\r\n                        <li key={index}>\r\n                            <h4>{event.title}</h4>\r\n                            <p>{event.address}</p>\r\n                            <p>{new Date(event.date).toLocaleDateString()}</p>\r\n                            {event.image && (\r\n                                <img \r\n                                    src={URL.createObjectURL(event.image)} \r\n                                    alt={event.title} \r\n                                    style={{ width: '100px', height: 'auto' }} \r\n                                />\r\n                            )}\r\n                        </li>\r\n                    ))\r\n                ) : (\r\n                    <p>No upcoming events found.</p>\r\n                )}\r\n            </ul>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Events;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}